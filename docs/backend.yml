                   ┌──────────────────────────────┐
                   │    Receive HTTP Request       │
                   │   (code + commands JSON)      │
                   │  (e.g., visualize_code: bool, │
                   │        visualize_complexity: bool) │
                   └───────────────┬──────────────┘
                                   │
                                   ▼
                   ┌──────────────────────────────┐
                   │      Preprocessing Code       │
                   │  (clean, validate syntax)     │
                   └───────────────┬──────────────┘
                                   │
                                   ▼
                 ┌─────────────────────────────────────┐
                 │    Call LLM Pre-execution Checker    │
                 │ (syntax errors, logical errors, tips)│
                 └───────────────┬─────────────────────┘
                                │
                ┌───────────────┴───────────────┐
                │                               │
           ┌────▼─────┐                  ┌──────▼─────┐
           │ Errors   │                  │ No Errors  │
           │ Found    │                  │ Found      │
           └────┬─────┘                  └────┬───────┘
                │                               │
                ▼                               ▼
  ┌───────────────────────────┐      ┌────────────────────────────┐
  │ Return Error Response to   │      │ Proceed to Processing Tasks │
  │ Frontend (JSON with errors)│      └─────────────┬──────────────┘
  └───────────────┬───────────┘                    │
                  │                                │
                  ▼                                ▼
          ┌────────────────────┐          ┌─────────────────────────┐
          │ End Request Early   │          │ Launch Requested Tasks  │
          │ (no further steps)  │          │ in Parallel / Independently│
          └────────────────────┘          └─────────────┬───────────┘
                                              │           │
                           ┌──────────────────┘           └────────────────────┐
                           │                                               │
               ┌───────────▼────────────┐                     ┌────────────▼────────────┐
               │ If visualize_code=true │                     │ If visualize_complexity=true │
               │ Call Tracer Module      │                     │ Call Complexity Analyzer Module │
               │ Execute & Trace Code    │                     │ (AST + Rules + Optional LLM)     │
               └───────────┬────────────┘                     └─────────────┬─────────────┘
                           │                                              │
                           ▼                                              ▼
               ┌───────────────────────┐                     ┌─────────────────────────┐
               │ Receive Trace Output   │                     │ Receive Complexity Data  │
               └─────────────┬─────────┘                     └─────────────┬───────────┘
                             │                                               │
                             └───────────────────────────────────────────────┘
                                             │
                                             ▼
                        ┌─────────────────────────────────────┐
                        │ Call LLM Explainer Module (optional) │
                        │ Generate code explanations            │
                        └───────────────┬─────────────────────┘
                                        │
                                        ▼
                      ┌────────────────────────────────────────────┐
                      │ Combine all requested data into unified JSON│
                      │ {trace, explanations, complexity info, ...} │
                      └───────────────┬────────────────────────────┘
                                      │
                                      ▼
                          ┌─────────────────────────────┐
                          │ Send Response to Frontend   │
                          │ (UI renders available parts)│
                          └─────────────────────────────┘
